<!DOCTYPE HTML>
<html>

<head>
	<title>Magyarországi FM rádióadók</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="/assets/css/main.css" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="/assets/css/custom_table.css" />
</head>

<body class="homepage is-preload">
	<div id="page-wrapper">

		<!-- Header -->
		<header id="header">
			<div class="logo container">
				<div>
					<p>Magyarországi FM rádióadók gyűjtőoldala</p>
				</div>
			</div>
		</header>

		<!-- Nav -->
		<nav id="nav">
			<ul>
				<li class="current"><a href="/index">Kezdőlap</a></li>
				<li><a href="/statistics">Statisztikák</a></li>
				<li><a href="/contact">Kapcsolat</a></li>
				<% if (user) { %>
					<li><a href="/radios">Rádióadók</a></li>
					<li><a href="/messages">Üzenetek</a></li>
					<% if (user.isAdmin==1 ) { %>
						<li><a href="/admin">Admin</a></li>
						<% } %>
							<li><a href="/auth/logout">Kijelentkezés</a></li>
							<% } else { %>
								<li><a href="/auth/login">Bejelentkezés</a></li>
								<li><a href="/auth/register">Regisztráció</a></li>
								<% } %>
			</ul>
		</nav>

		<!-- Main -->
		<div class="container mt-5 mb-5">
			<div class="row justify-content-center">
				<div class="col-lg-10 col-md-12">
					<div class="card shadow-sm">
						<div class="card-body">
							<h2 class="card-title text-center mb-4" style="color:#246;">
								Beérkezett üzenetek
								<% if (!user.isAdmin) { %>
									(Saját üzenetek)
									<% } %>
							</h2>
							<div class="table-responsive">
								<table class="table table-striped table-bordered align-middle">
									<thead class="table-light">
										<tr>
											<th>Név</th>
											<th>Felhasználónév</th>
											<th>Tárgy</th>
											<th>Üzenet</th>
											<th>Elküldés időpontja</th>
										</tr>
									</thead>
									<tbody>
										<% if (messages.length===0) { %>
											<tr>
												<td colspan="5" class="text-center text-muted">Nincs megjeleníthető
													üzenet.</td>
											</tr>
											<% } %>
												<% messages.forEach(function(msg) { %>
													<tr>
														<td>
															<%= msg.name %>
														</td>
														<td>
															<%= msg.username ?? '-' %>
														</td>
														<td>
															<%= msg.subject %>
														</td>
														<td style="max-width:380px; word-break:break-word;">
															<%= msg.body %>
														</td>
														<td>
															<%= msg.created_at ? new
																Date(msg.created_at).toLocaleString('hu-HU')
																: 'nincs adat' %>
														</td>
													</tr>
													<% }); %>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>







		<!-- Footer -->
		<footer id="footer">
			<div class="container">
				<!-- Copyright -->
				<div id="copyright">
					<ul class="menu">
						<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>

			</div>
		</footer>

	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.dropotron.min.js"></script>
	<script src="assets/js/jquery.scrolly.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

</body>

</html>